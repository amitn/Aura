; PlatformIO Project Configuration File
; Aura - Weather Widget for ESP32-2432S028R (CYD - Cheap Yellow Display)
;
; Build: pio run
; Upload: pio run --target upload
; Monitor: pio device monitor

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; OTA-compatible partition scheme: ~1.87MB per app, 128KB SPIFFS
board_build.partitions = min_spiffs.csv

; Serial monitor
monitor_speed = 115200

; Upload speed - lower for reliability with CH340 USB chips
upload_speed = 115200

; Build flags
build_flags = 
    ; Optimize for size
    -Os
    -ffunction-sections
    -fdata-sections
    
    ; LVGL configuration
    -D LV_CONF_INCLUDE_SIMPLE
    -I include
    
    ; TFT_eSPI configuration - use our custom User_Setup.h
    -D USER_SETUP_LOADED
    -D ILI9341_2_DRIVER
    -D TFT_WIDTH=240
    -D TFT_HEIGHT=320
    -D TFT_MISO=12
    -D TFT_MOSI=13
    -D TFT_SCLK=14
    -D TFT_CS=15
    -D TFT_DC=2
    -D TFT_RST=-1
    -D TFT_BL=21
    -D TFT_BACKLIGHT_ON=HIGH
    -D TOUCH_CS=33
    -D SPI_FREQUENCY=55000000
    -D SPI_READ_FREQUENCY=20000000
    -D SPI_TOUCH_FREQUENCY=2500000
    -D USE_HSPI_PORT
    ; TFT_eSPI fonts disabled - LVGL handles all fonts
    ; -D LOAD_GLCD
    ; -D LOAD_FONT2
    ; -D LOAD_FONT4
    ; -D LOAD_FONT6
    ; -D LOAD_FONT7
    ; -D LOAD_FONT8
    ; -D LOAD_GFXFF
    -D SMOOTH_FONT

; Library dependencies
lib_deps = 
    ; Core libraries
    bblanchon/ArduinoJson @ ^7.4.1
    tzapu/WiFiManager @ ^2.0.17
    https://github.com/PaulStoffregen/XPT2046_Touchscreen.git
    
    ; Display libraries
    bodmer/TFT_eSPI @ ^2.5.43
    lvgl/lvgl @ ^9.2.2

; Extra source files location
lib_extra_dirs = 

; Ignore the old Arduino-style folders
lib_ignore = 
